[tox]
skipsdist = True

envlist =
    py39-conan, py39-conan2

[testenv:py39-conan]
deps =
    -r requirements_test.txt
    conan<2
    .

[testenv:py39-conan2]
deps =
    -r requirements_test2.txt
    conan>=2
    .

[testenv]
; deps =
;     tabulate
;     conan-latest: conan
;     conan-dev: https://github.com/conan-io/conan/archive/develop.tar.gz
;     .

setenv =
    PYTHONDONTWRITEBYTECODE=1
    PYTHONPATH = {toxinidir}:{env:PYTHONPATH:}
    CONAN_TEST_SUITE=1
    ; CONAN_DOCKER_USE_SUDO=1
    ; USE_UNSUPPORTED_CONAN_WITH_PYTHON_2=1

passenv = *

commands =
    pytest --cov=cpt --cov-report=html {posargs:tests}